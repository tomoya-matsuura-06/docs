---

date saber問題

DAY4

Q4

- 指標を表すには「マーク」「行」「列」にメジャーを置かないといけない。
- ビューにメジャーを置いた際に合計（利益）などが出ていれば数値として扱われているが、利益単体で表示されている場合それはディメンション（文字列）として扱われるため正しい集計といえない。（この状態で使用することはない）

Q5

- 割合を100%の中で内訳を確認する場合は、棒グラフでその項目に対しての合計に対しての割合で確認する。
- 基本の構成として列、行、マークの3要素が埋まっていて確認したいことが表現できる。

Q6

- フィルタの階層を上げて内容を固定化したい場合はコンテキストフィルターを使用する。（例：2016年のカテゴリと地域別、顧客名ごとの売上。2016年単体で求めたい時）
- コンテキストフィルターの使用方法は、フィルタに設置 → 右クリック → コンテキストに追加

Q8

- ダッシュボードアクションの設定はソースシート（選択側）とターゲットシート（選択される側）を指定する。両方を適用させると意図しない動きに繋がる可能性があるためどちらか片方だけをコントロールする形をとる。
- 〇〇の詳細を確認するときは一番データが細かいものを選択して使用する。オーダーIDなどユニークのものを設定することで詳細確認ができる。

Q9

- LOD計算はできるだけ使用しない。処理が重くなり操作性が悪くなる。列、行、マークに指標を入れて表現できないデータの粒度の場合にのみ使用する。イメージは中間テーブルの作成で、その粒度からさらに条件（ディメンション）を必要とする場合にLODを使用する。

Q11

- 一行単位なのか集計単位なのかを一番初めにチェックする。問題を見た時にどのデータの単位で確認したいのかを押さえることが一番大事であり、一番初めに行うこと。

Q12

- パラメータの設定は文字列であれば文字列の値で参照が合う状態に設定しなければならない。基本は整数で1：家具の状態。これがパフォーマンス的にも良いので整数合わせは避けたい。
- 計算式にカテゴリが入っている場合は、ビューにカテゴリのディメンションを置かなくても合算して売上値が計算されている。確認したい項目が地域の売上に対して、このようなカテゴリを含んだ計算であればその売上のデータは地域×売上だけでなく、地域×カテゴリの売上といった複合的なデータになっている

DAY6

Q2

- 最新日を固定して、顧客とオーダー日を固定化すること。この中間テーブル作成の構成について理解すること。
- 最新日をFIXEDで固定すると、オーダー日は一行単位のデータの全てが最新日で固定されていることがイメージとしてわかっていること。
- 顧客名ごとの最新日を{ FIXED [顧客名] : MAX([オーダー日])}で指定する。この固定化によって、その前に固定化された全てのオーダーの中の最新日と比較できるように。
- datediffで日数の差分を求める際は、すでに作成された計算フィールドを参照する。ここで新たにFIXEDを入れて計算すると、計算が複数定義されていることによりデータの正確性が確保できなくなるリスク。作成して使用するディメンションはユニークなものであり、同じ計算が分散して行われないことは原則である。

Q5

- 計算ができていることはもちろん、BIにおいては一目でパッと比較ができることも大切
- 比較の場合は円グラフ、積み上げなど、やりたいことに対してどのグラフを使用するべきかがすぐに出てくるようになれることが望ましい。適切な可視化選択。
- FIXEDはタグ付けのイメージ。中間テーブルでイメージするとFIXEDを経由して何か新しい計算であったり、ハブみたいな考えになってしまう。これをもっとライトに考えて情報を付与、番号札をつけるように考えられるとより扱いやすくなる。
- FIXEDで求めた内容は必ずしも「指標」として使用する必要はない。色分けとして使用する使い方もある。
- 問題への回答は段階的に考える。必要な要素は問題文に全てある。自分で複雑にしようとしない。答えはもっとシンプルかもしれない。今回は年数と売上を確認して、顧客の初回購入年をFIXEDで作成して色分けに使用することで良い。

Q6

- 指標としてみたいものをまず揃える必要がある。今回の場合、顧客ごとの初回四半期ごととあれば「初回購入した顧客数」を「四半期ごと」に確認する必要がある。データの切り口と指標の捉え方が問題を考える上で意識しなければならないこと！

Q6（オプション）

- 「〇〇あたり」は平均のことを表す。全体の売上がある、顧客数があって売り上げを顧客数で割ることで一人当たりの売上を求めることができる。

Q7

- AVG()での平均は全体の平均となってします。一日単位で平均を出したい場合は、SUM([売上]) / COUNTD([オーダー日])の計算となるため注意。もしくはFIXEDを使用している際は全体をAVGで囲う方法もある。
- 曜日の取得方法は、DATENAME('weekday', [オーダー日])で可能。
- すべての要素をFIXEDで求めることも可能。この場合、月と曜日ごとの一日あたるの売上平均を求める。{ FIXED MONTH([オーダー日]), DATENAME('weekday', [オーダー日]) : AVG({FIXED [オーダー日] : SUM([売上])}) }

Q8

- （Excludeを理解できているか）今回は選択したカテゴリと選択していないカテゴリの売上を比較したいので、カテゴリを選択した際に列で並んでいるカテゴリの内容を選択した内容の指標が表示されるようにしなければならない。選択するパラメータにもビューにもカテゴリが使用されているので、含まないという概念が必要になってくる。
- 計算した指標をソートにかけることができるか
- パラメータの作成ができているか

---

### センター・テナントレポート.twbx（サイモン）

- スコアカードの中に予算比較、期間比較など必ず比較してどうなっているのかわかるようになっている。
- スコアカードはシート単体につき1つの作成。作成後は非表示にする。（← tableauの仕様上、複数のメジャーを個別のカードとして並べることが難しいため）（作成の手間が増えるが後からの修正が容易なため保守性を考えるとこの方法が良い）
- 比較するものがある場合は、表の形でセルの中にグラフとラベルを用いて多くの行を表示させつつ一目で確認できるようにする。100%以下であれば赤色になるなどの強調表示がなされている。
- 棒グラフにおいて比較元と比較先が必ずあるけど、これらの違いを明確にするには色分けが適している。
- 可視化はあくまでデザインであって大事なのは裏側のデータが正確であること。計算して集計してそれを見せることは手法でしかない、どのデータ、どの粒度で数値を持っているかそれ計算できているかが大事。
- ダッシュボードの作成において縦スクロールがなくなるように1ページに収めないといけないというわけではない。確認したい項目が増えれば当然表示領域も広がる、無理に収めようとするのはかえって使いやすさの低下につながる可能性もあることを考慮する。
- 12項目くらいであれば円グラフを使用して全体に対しての割合確認を行なっても良い。項目が多くなりすぎると円グラフは非推奨。
- パラメータに関しては値を1からインクリメントして作成していく。文字列で該当させると不要な処理が増えるため数値を利用する。
- IIFを使用することが多く、もしフィルタで選択した期間が実行されたらその客数を反映させるなど実行したい件数に応じてそれぞれ計算を作成することになるので多くなる。
- 計算フィールドにおいて似ている名前が増えていくので、簡潔であり役割が明確な適切な名前をつけることを意識する

---

### 積水ハウスのプロトタイプ作成から学んだこと

- 複合グラフで棒と線かなさるグラフにおいては色の識別がつきにくい。棒側の不透明度を50%にするなどして視認性を意識する
- 表の総計値を出す方法は、分析タブから「合計」を選択する。位置の選択も可能。
- カラム名やグラフの軸名などなくてもわかるものは非表示にする。
- 全てのフィルタが連動すれば良いわけではない。パラメータを共通化することによって意図しないフィルタがかかる可能性もある。内容が同じであってもグラフ単位でパラメータを作成（複製）して分けて扱うように。
- 散布図で分布が確認できない状況であれば工夫が必要。右上に固まっているなど。
- 散布図の塗りつぶしとサイズによって見え方の印象が大きく変わる。

### パブリッシュの流れと気をつけること

1. tableau serverをブラウザで開く
2. 使用する階層に入る
    1. 今回は社外のため1st partyに入る
3. 提供先の名前のフォルダを作成
4. パーミッションの確認
5. ロックをかける
    1. このロックによりダッシュボード、DS含め全ての権限が統一されるため重要

1. 作成したダッシュボードをtableau desktopで開く
2. ログインしているアカウントを確認する
    1. サーバータブ > サインイン
    2. 社内：sepjp-analysis
    3. 社外：sep-analysis
3. ワークブックのパブリッシュを選択
    1. シート保存先を確実に提供先を合わせて設定
    2. 適切なファイル名をつける
    3. パブリッシュタイプ → ワークブック埋め込み
        1. WB埋め込みは、データソース付与で自己完結の形
        2. パブリッシュされたデータソースは、DS自体をアップロードする形となり、再利用可

Q1. 確認してもらうのはダッシュボードのみとする？

A1. シートの表示は不要。基本はシートを作成し終えたら非表示にする。

Q2. パブリッシュの保存先を間違えると違う顧客の人が確認できてしまう？

A2. そうなってしまわないよう気をつける。

